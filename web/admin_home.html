<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>

  <style>
    /* admin-specific tile + form tweaks */
    .admin-tiles {
      display: flex;
      gap: 28px;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      padding: 26px 0 8px;
    }

    .tile {
      width: 260px;
      height: 160px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(47,128,237,0.98), rgba(41,103,210,0.95));
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 12px 30px rgba(25, 45, 100, 0.16);
      cursor: pointer;
      transition: transform .18s ease, box-shadow .18s ease;
      user-select: none;
    }

    .tile .icon { font-size: 34px; margin-bottom: 10px; }
    .tile h3 { margin: 0; font-size: 18px; font-weight: 700; }

    .tile.tile-ghost { background: linear-gradient(135deg, rgba(58,63,138,0.95), rgba(76,82,170,0.9)); }
    .tile:hover { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(25,45,100,0.22); }

    .form-actions { display:flex; justify-content:center; gap:14px; margin-top:16px; }

    /* table tidy */
    table tbody td { vertical-align: middle; }

    @media (max-width: 680px) {
      .tile { width: 92%; height: 120px; }
      .admin-tiles { gap: 14px; padding: 18px 0; }
    }
  </style>
</head>
<body class="login-bg">
  <header><h1>Admin Dashboard</h1></header>

  <div class="container">
    <div class="card">
      <h2>Manage Users</h2>

      <div class="admin-tiles">
        <div class="tile tile-ghost" id="openStudentTile" onclick="document.getElementById('studentForm').scrollIntoView({behavior:'smooth', block:'center'}); document.getElementById('studentForm').style.display='block'">
          <div class="icon">‚ûï</div>
          <h3>Add Student</h3>
        </div>

        <div class="tile" id="openFacultyTile" onclick="document.getElementById('facultyForm').scrollIntoView({behavior:'smooth', block:'center'}); document.getElementById('facultyForm').style.display='block'">
          <div class="icon">üë©‚Äçüè´</div>
          <h3>Add Faculty</h3>
        </div>
      </div>

      <p style="text-align:center; color:var(--muted); margin-top:6px;">Quick actions ‚Äî click a tile to open the form below</p>
    </div>

    <!-- Add Student form -->
    <div id="studentForm" class="card mt-16" style="display:none;">
      <h2 class="mb-8">Add Student</h2>

      <div class="form-grid full">
        <label>Student ID
          <input type="text" id="studentId" placeholder="e.g. S12345" required>
        </label>

        <label>Password
          <input type="password" id="studentPass" placeholder="password" required>
        </label>

        <label>Mobile
          <input type="text" id="studentMobile" placeholder="10-digit mobile" required>
        </label>
      </div>

      <div class="form-actions">
        <!-- THIS calls addStudent() in script.js -->
        <button class="btn btn-success" onclick="addStudent()">Save Student</button>
        <button class="btn btn-ghost" type="button" onclick="clearStudentForm()">Clear</button>
      </div>

      <h3 class="mt-16">Student List</h3>
      <div class="table-wrap">
        <!-- renderStudents() expects #studentList OR #studentTable depending on script; improved script uses #studentList for list and #studentTable for table earlier ‚Äî
             To be safe, include both areas. renderStudents() in improved script writes into #studentList; older scripts used table. -->
        <ul id="studentList" style="list-style:none; padding-left:0;"></ul>

        <!-- Also include a table view (if any script uses it) -->
        <table id="studentTable" style="margin-top:12px;">
          <thead>
            <tr><th>Student ID</th><th>Mobile</th><th style="text-align:center">Action</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <!-- Add Faculty form -->
    <div id="facultyForm" class="card mt-16" style="display:none;">
      <h2 class="mb-8">Add Faculty</h2>

      <div class="form-grid full">
        <label>Faculty ID
          <input type="text" id="facultyId" placeholder="e.g. F001" required>
        </label>

        <label>Password
          <input type="password" id="facultyPass" placeholder="password" required>
        </label>
      </div>

      <div class="form-actions">
        <!-- THIS calls addFaculty() in script.js -->
        <button class="btn btn-success" onclick="addFaculty()">Save Faculty</button>
        <button class="btn btn-ghost" type="button" onclick="clearFacultyForm()">Clear</button>
      </div>

      <h3 class="mt-16">Faculty List</h3>
      <div class="table-wrap">
        <ul id="facultyList" style="list-style:none; padding-left:0;"></ul>

        <table id="facultyTable" style="margin-top:12px;">
          <thead>
            <tr><th>Faculty ID</th><th style="text-align:center">Action</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    /* Backwards compatibility: if older scripts expect renderStudents/renderFaculty to fill tables,
       call those table-renders from the improved script's render functions if necessary.
       These small helpers attempt to keep both styles working. */

    function updateFallbackTables() {
      // student table fallback
      const students = JSON.parse(localStorage.getItem('students') || '[]');
      const stTableBody = document.querySelector('#studentTable tbody');
      if (stTableBody) {
        stTableBody.innerHTML = students.length ? students.map((s,i)=>`<tr><td>${s.id}</td><td>${s.mobile||''}</td><td style="text-align:center"><button class="btn btn-danger" onclick="deleteStudent(${i})">Delete</button></td></tr>`).join('') : '<tr><td colspan="3" style="text-align:center; color:var(--muted)">No students yet</td></tr>';
      }

      const faculty = JSON.parse(localStorage.getItem('faculty') || '[]');
      const fTableBody = document.querySelector('#facultyTable tbody');
      if (fTableBody) {
        fTableBody.innerHTML = faculty.length ? faculty.map((f,i)=>`<tr><td>${f.id}</td><td style="text-align:center"><button class="btn btn-danger" onclick="deleteFaculty(${i})">Delete</button></td></tr>`).join('') : '<tr><td colspan="2" style="text-align:center; color:var(--muted)">No faculty yet</td></tr>';
      }
    }

    // call fallback updater after DOM ready and when localStorage changes
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof renderStudents === 'function') renderStudents();
      if (typeof renderFaculty === 'function') renderFaculty();
      updateFallbackTables();
    });

    // also listen to storage events (in case you open admin in two windows)
    window.addEventListener('storage', () => {
      if (typeof renderStudents === 'function') renderStudents();
      if (typeof renderFaculty === 'function') renderFaculty();
      updateFallbackTables();
    });
  </script>
</body>
</html>
